---
layout:     post
title:      "网络身份认证"
subtitle:   "eID,eID卡, 公安部公民网络身份服务"
date:       2016-11-08
author:     "Petrel Xiang"
header-img: "img/post-bg-eid.jpg"
tags:
    - eID介绍
    - 网络身份认证服务
    - 身份认证

---


## [eID的定义](http://eid.cn/index.html)
eID是以密码技术为基础、以智能安全芯片为载体、由“公安部公民网络身份识别系统”签发给公民的网络电子身份标识，能够在不泄露身份信息的前提下在线远程识别身份。
使用eID相关产品和服务时，请认准eID.cn标志标识。


## eID产生的背景


目前国内的网络远程身份验证普遍使用“关联比对”方法，即将用户输入的“姓名+身份证号”等个人信息，传到后台对个人信息的正确性进行比对来认定身份。


**"关联比对"方法在大规模应用的场景下主要存在几个问题**：

* 个人信息比对正确并不能代表本人真实意愿，无法防范个人身份被冒用或盗用的风险；
* 容易造成个人信息泄露。采集个人信息的网络应用服务机构安全水平不一，个人信息大规模泄露的风险越来越高。

**面对以上问题，eID在权威性、安全性、普适性、私密性方面具有其他技术不可比拟的优势，可满足公民在个人隐私、网络交易及虚拟财产等多方面的安全保障需求，但是在硬件要求性方面却有很大的局限性。**：

* **权威性**：eID基于公安部人口库的审核，由“公安部公民网络身份识别系统”统一签发，可进行跨地域、跨行业的网络身份服务；
* **安全性**：eID含有一对由智能安全芯片内部产生的非对称密钥，确保其无法被非法读取、复制、篡改或使用。并且每张eID都会有设置4~16位的数字PIN码用户作为解密eID卡信息的密钥，连续输入错误超过3次，eID卡将被锁定；
* **普适性**： eID不受载体物理形态的限制，只要载体中的安全智能芯片符合eID载体相关标准即可,如金融IC卡、社保卡、市民卡等；
* **隐私性**： eID的唯一性标识采用国家商用密码算法生成，不含任何个人身份信息，且每位公民只可以选择在一个eID载体上开通eID功能；
* **局限性(NFC支持)**： 若想使用eID相关功能，相关智能设备必须自带或能外接NFC读卡器。目前，智能设备中开方NFC功能的只有Android系统的手机(不知某果什么时候能允许开发者使用NFC功能)，而带有NFC功能的Android的机型又屈指可数...。


## eID的技术原理


公安部公民网络身份识别系统”向用户签发eID时，会以用户个人身份信息和随机数计算出一个唯一代表用户身份的编码，即用户的网络身份标识编码（eIDcode）。该编码不含任何个人身份信息，且不可逆。用户使用eID通过网络向应用方自证身份时，应用方会通过连接“公安部公民网络身份识别系统”的运营和服务机构，请求验证核实用户网络身份的真实性和有效性。一旦用户网络身份通过验证，应用方会得到一个与该应用相对应的用户网络身份应用标识编码（appeIDcode）。
因此，虽然用户拥有唯一的网络身份标识编码（eIDcode），但在不同的应用机构只能得到不同的网络身份应用标识编码（appeIDcode），从而避免用户在不同网络应用中的行为数据被汇聚、分析和追踪，最大程度的保护个人身份和隐私信息。


## eID应用服务机构


eID应用服务机构是面向AP(应用方)提供eID服务的窗口。 AP将eID认证服务请求发送给eID应用服务机构，eID应用服务机构将其转发至eID运营机构，由eID运营机构完成对eID认证服务请求的验证，并将验证结果返回给eID应用服务机构，eID应用服务机构再将其返回给AP。
eID应用服务机构自建自建IT系统，对AP进行接入管理，接收来自AP的eID认证服务请求，并将其转发至eID运营机构进行验证。


> **eID提供商**:
>
> * [金联汇通](http://www.eidlink.com)
> * [云开信安](http://www.eidsp.cn)


## eID提供的服务


#### 实名认证


由第三方应用负责收集用户的姓名、证件类型、证件号码信息，并要求用户用eID卡签名，第三方应用将身份信息及签名值发送到IDSP平台进行实名认证的过程。

![java-javascript](/img/in-post/post-eid/eid-pki.jpg)
<small class="img-hint">PKI 身份识别业务泳道图</small>

#### HMAC实名认证


由第三方应用负责收集用户的姓名、证件类型、证件号码信息，并要求用户用eID卡签名，第三方应用将身份信息及签名值发送到IDSP平台，IDSP验证用户身份信息及HMAC签名值，若验证通过后再查询用户eID证书状态，将验证结果及eID状态（仅验证通过时）一并返回给第三方应用。


#### 签名验证


由第三方应用负责收集业务数据，并要求用户用eID卡签名，第三方应用将业务数据及签名值发送到IDSP平台进行验证的过程。


#### HMAC验证


由第三方应用负责收集业务数据，并要求用户用eID卡签名，第三方应用将业务数据及签名值发送到IDSP平台，IDSP验证HMAC签名值，若验证通过后再查询用户eID证书状态，将验证结果及eID状态（仅验证通过时）一并返回给第三方应用。


#### PKI实名登录


具备大量身份信息的应用根据指定运算规则对现有身份库进行改造，增加身份信息索引值H。IDSP对eID用户的PKI签名进行验证，并返回相应的身份信息索引值，便于第三应用将eID与原始信息库中数据关联。常用于eID免注册登录场景。

```js

H2=SM3(SM3(身份证号+ Salt) + APP_Salt)

```

其中，Salt由eID中心指定；APP_Salt由应用注册时上传至eID中心配份。


#### HMAC实名登录
具备大量身份信息的应用根据指定运算规则对现有身份库进行改造，增加身份信息索引值H。IDSP对eID用户的HMAC签名进行验证，并返回相应的身份信息索引值，便于第三应用将eID与原始信息库中数据关联。常用于eID免注册登录场景。

```js

H2=SM3(SM3(身份证号+ Salt) + APP_Salt)

```

其中，Salt由eID中心指定；APP_Salt由应用注册时上传至eID中心配份。


> **相关术语、定义和缩略语**:
>
> * 传输到eID卡中进行签名的原文中，业务数据建议是实际交易的内容或交易内容的哈希值。
> * **AP**: 应用服务提供机构
> * **IDSP**: 身份服务提供机构
> * **eID中心**: 权威eID颁发机构
> * **eID device**: eID专用验证设备
> * **eidcode**: eID标识
> * **appeidcode**: eID应用标识
> * **idcarrier**: eID载体标识
> * **appid**: AP在IDSP的注册ID
> * **idspid**: IDSP在eID中心的注册ID
> * **appkey**: AP与IDSP间通信密钥
> * **idspkey**:IDSP和eID中心之间通信密钥
> * **regcode**: AP注册时eID中心生成的注册码，注册码仅eID device能识别，用于生成appeidcode


* *相关文档下载*： <a href="{{ site.baseurl }}/img/in-post/post-eid/eID应用技术规范v1.docx">eID技术规范</a>


—— Petrel Xiang, 2016-11-08
